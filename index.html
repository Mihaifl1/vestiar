<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Vestiar – toate ușile împrăștiate + HUD coordonate</title>
<style>
  :root{
    --bg:#0b1220; --wall:#e5e7eb;
    --closed:#22c55e;  /* verde = ÎNCHIS  */
    --open:#ef4444;    /* roșu  = DESCHIS */
    --nopower:#6b7280; --hinge:#94a3b8;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:#fff;font-family:Arial,Helvetica,sans-serif}
  .wrap{max-width:1100px;margin:0 auto;padding:16px}
  h1{font-size:20px;margin:0 0 10px}

  .legend{font-size:14px;opacity:.9;margin:8px 0 12px}
  .legend span{display:inline-block;margin-right:8px;padding:2px 8px;border-radius:6px}
  .legend .c{background:var(--closed)}
  .legend .o{background:var(--open)}
  .legend .p{background:var(--nopower)}

  .plan{
    position:relative; width:100%;
    border:10px solid var(--wall); border-radius:12px; overflow:hidden;
    background:#0b1220;
    user-select:none;
  }
  .plan-img{
    display:block; width:100%; height:auto;
  }
  .overlay{
    position:absolute; inset:0; pointer-events:auto;
  }

  .hud{
    position:absolute; right:10px; top:10px; z-index:10;
    background:rgba(15,23,42,.9); border:1px solid #334155; border-radius:8px;
    padding:6px 10px; font-size:12px; black-space:nowrap
  }
  .hud code{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}

  /* crosshair */
  .cross{
    position:absolute; pointer-events:none; z-index:5;
  }
  .cross .hline, .cross .vline{
    position:absolute; background:rgba(255,255,255,.4);
  }
  .cross .hline{height:1px; left:0; right:0;}
  .cross .vline{width:1px; top:0; bottom:0;}

  .door{
    position:absolute; left:0; top:0;
    --x: 0%; --y: 0%; --a: 0;
    transform: translate(var(--x), var(--y)) rotate(calc(var(--a) * 1deg));
    transform-origin: 0 0;
    width: 84px; height: 40px;
    cursor:pointer;
  }
  .door .hinge{
    position:absolute; top:6px; width:8px; height:20px;
    background:var(--hinge); border-radius:4px;
  }
  .door .leaf{
    position:absolute; top:8px; width:72px; height:10px;
    border:2px solid #000; border-radius:6px; background:var(--closed);
    transition: transform .25s ease, background .2s ease, box-shadow .2s ease;
    transform-origin: left center; box-shadow:0 0 0 rgba(0,0,0,0);
  }
  .door .label{
  position:absolute; left:-20px; top:30px;
  font-size:12px; font-weight:bold;
  color: blue;                         /* ← culoarea textului */
  text-shadow:0 1px 2px rgba(0,0,0,.5);
}


  .door[data-hinge="left"] .hinge{ left:-6px }
  .door[data-hinge="right"] .hinge{ right:-6px }
  .door[data-hinge="left"]  .leaf{ left:0;  transform-origin:left  center }
  .door[data-hinge="right"] .leaf{ right:0; transform-origin:right center }

  /* swing up/down */
  .door[data-hinge="left"][data-swing="down"].open .leaf{ transform: rotate(60deg);  background:var(--open); box-shadow:0 6px 10px rgba(0,0,0,.45) }
  .door[data-hinge="left"][data-swing="up"].open   .leaf{ transform: rotate(-60deg); background:var(--open); box-shadow:0 6px 10px rgba(0,0,0,.45) }
  .door[data-hinge="right"][data-swing="down"].open .leaf{ transform: rotate(-60deg); background:var(--open); box-shadow:0 6px 10px rgba(0,0,0,.45) }
  .door[data-hinge="right"][data-swing="up"].open   .leaf{ transform: rotate(60deg);  background:var(--open); box-shadow:0 6px 10px rgba(0,0,0,.45) }

  .door.nopower .leaf{ background:var(--nopower) }
</style>
</head>
<body>
<div class="wrap">
  <h1>Vestiar </h1>
  <div class="legend">
    <span class="c">ÎNCHIS (verde)</span>
    <span class="o">DESCHIS (roșu)</span>
    <span class="p">Fără alimentare (gri)</span>
    <span style="opacity:.8;margin-left:8px">Click pe ușă = comută, Shift+Click = fără alimentare</span>
  </div>

  <div class="plan" id="plan">
    <img id="planImg" class="plan-img" src="vestiar.jpg" alt="Plan Vestiar">

    <div class="hud" id="hud">X: <code>0%</code> &nbsp; Y: <code>0%</code> &nbsp; <span id="px">(0×0 px)</span></div>

    <div class="overlay" id="overlay">
      <!-- crosshair -->
      <div class="cross" id="cross">
        <div class="hline"></div>
        <div class="vline"></div>
      </div>
      <!-- usi -->
      <div class="door" id="d1" data-hinge="left"  data-swing="down"><div class="hinge"></div><div class="leaf"></div><div class="label">Ușa 1</div></div>
      <div class="door" id="d2" data-hinge="left"  data-swing="down"><div class="hinge"></div><div class="leaf"></div><div class="label">Ușa 2</div></div>
      <div class="door" id="d3" data-hinge="right" data-swing="down"><div class="hinge"></div><div class="leaf"></div><div class="label">Ușa 3</div></div>
      <div class="door" id="d4" data-hinge="right" data-swing="up"><div class="hinge"></div><div class="leaf"></div><div class="label">Ușa 4</div></div>
      <div class="door" id="d5" data-hinge="left"  data-swing="up"><div class="hinge"></div><div class="leaf"></div><div class="label">Ușa 5</div></div>
      <div class="door" id="d6" data-hinge="right" data-swing="down"><div class="hinge"></div><div class="leaf"></div><div class="label">Ușa 6</div></div>
    </div>
  </div>
</div>

<script>
/* CONFIG inițial – ușile puse aleator pe ecran */
const CONFIG = {
  d1: { x: 137, y: 220, a: 0,   hinge:'left',  swing:'up' },
  d2: { x: 270, y: 220, a: 0,   hinge:'left',  swing:'up' },
  d3: { x: 430, y: 220, a: 0,   hinge:'left', swing:'up' },
  d4: { x: 1100, y: 2700, a: 90,   hinge:'right', swing:'up'   },
  d5: { x: 1100, y: 3000, a: 90,   hinge:'right',  swing:'up'   },
  d6: { x: 1100, y: 3360, a: 90,   hinge:'right', swing:'up' }
};

/* stare usi */
const state = {};
function setDoorState(id, st){
  state[id] = st;
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.toggle('open', st==='UNLOCKED');
  el.classList.toggle('nopower', st==='NOPOWER');
}
document.querySelectorAll('.door').forEach(el=>{
  state[el.id] = 'LOCKED';
  el.addEventListener('click', e=>{
    const id = el.id;
    if(e.shiftKey){ setDoorState(id,'NOPOWER'); return; }
    setDoorState(id, state[id]==='LOCKED' ? 'UNLOCKED' : 'LOCKED');
  });
});

/* aplică CONFIG */
function applyConfig(){
  Object.keys(CONFIG).forEach(id=>{
    const el = document.getElementById(id);
    if(!el) return;
    const {x,y,a,hinge,swing} = CONFIG[id];
    el.style.setProperty('--x', x + '%');
    el.style.setProperty('--y', y + '%');
    el.style.setProperty('--a', a);
    el.dataset.hinge = hinge;
    el.dataset.swing = swing;
  });
}
applyConfig();

/* HUD + crosshair */
const overlay = document.getElementById('overlay');
const hud = document.getElementById('hud');
const cross = document.getElementById('cross');
const pxSpan = document.getElementById('px');

function updateHud(e){
  const rect = overlay.getBoundingClientRect();
  const xpx = e.clientX - rect.left;
  const ypx = e.clientY - rect.top;
  const x = (xpx / rect.width ) * 100;
  const y = (ypx / rect.height) * 100;

  hud.innerHTML = `X: <code>${x.toFixed(1)}%</code> &nbsp; Y: <code>${y.toFixed(1)}%</code> &nbsp; `;
  pxSpan.textContent = `(${Math.round(xpx)}×${Math.round(ypx)} px)`;
  hud.appendChild(pxSpan);

  cross.style.left = 0;
  cross.style.top = 0;
  cross.querySelector('.hline').style.top = ypx+'px';
  cross.querySelector('.vline').style.left = xpx+'px';
}
overlay.addEventListener('mousemove', updateHud);

/* click = copiază coordonate */
overlay.addEventListener('click', e=>{
  if(e.target.closest('.door')) return;
  const rect = overlay.getBoundingClientRect();
  const x = ((e.clientX - rect.left) / rect.width ) * 100;
  const y = ((e.clientY - rect.top ) / rect.height) * 100;
  const line = `{ x: ${x.toFixed(1)}, y: ${y.toFixed(1)}, a: 0, hinge:'left', swing:'down' }`;
  navigator.clipboard?.writeText(line).then(()=>{
    hud.innerHTML = `✅ Copiat: <code>${line}</code>`;
    setTimeout(()=>{hud.innerHTML = `X: <code>0%</code> &nbsp; Y: <code>0%</code> &nbsp; <span id="px">(0×0 px)</span>`},1500);
  });
});
</script>
</body>
</html>
